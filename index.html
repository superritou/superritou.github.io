<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>
    <title>Liste des tutoriels</title>
    <!-- The style.css file allows you to change the look of your web pages.
         If you include the next line in all your web pages, they will all share the same look.
         This makes it easier to make new pages for your site. -->
    <link href="/style.css" rel="stylesheet" type="text/css" media="all">
    <link rel="shortcut icon" type="image/x-icon" href="/t.png">
    <link href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,400;0,700;1,400&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Noto+Sans+JP:wght@100;300;400;500;700;900&family=Yellowtail&display=swap" rel="stylesheet">
    <script src="/tuto.js"></script>
  </head>
  <body>




<a name="top"></a>

 
<div class="container" id="container">

<div id="up">
<a href="#top"><img src="http://img.xooimage.com/files113/0/9/a/capture-d-cran-20...16.07.46-56edbda.png" border="0" alt="up"></a>
<span>Haut de page</span>
</div>

<div id="down">
<a href="#bottom"><img src="http://img.xooimage.com/files115/d/f/1/capture-d-cran-20...16.07.46-56edbee.png" border="0" alt="down"></a>
<span>Bas de page</span>
</div>

        <x-sign>
	        Liste des Tutoriels
	<br />
	<small>
		Pour Forum Xooit
	</small>
        </x-sign>

           <span class="anim" id="anim">
		<a href="javascript:window.location.href = path;" data-title="Actualiser la page">
			<img src="http://img.xooimage.com/files112/6/3/1/button-refresh-icon1-578474d.png" border="0" />
		</a>
           </span>

<div class="info-block" id="admin" style="display:none;">
   <h2>Création d'un nouveau lien pour la template<br />(seulement visible par les admins)</h2>
        <div class="inputy">
                <input type="text" id="titre" placeholder="Titre du tuto sans [Tuto]">
                <br /><br />
        </div>

        <div class="inputy">
                <input type="number" id="titre_num" placeholder="Tuto N° (après /t)">
                <br /><br />
        </div>

        <div class="center_flex">
                <button class="glow-on-hover two" type="button" onclick="f_admin()">Création du code html pour la template</button>
                <br /><br />
                <textarea id="text_tuto" style="resize:none; overflow:hidden;" readonly rows="7" cols="70" onclick="select()"></textarea>       
        </div>

</div>

<div class="info-block">
  <h2>Effectuer une recherche</h2>
	<div class="inputy">
		<input name="keyword" id="search" type="text" placeholder="Rechercher un Tuto..." />
                <br /><br />
                <button class="glow-on-hover one" type="button" onclick="find()">Lancer la recherche par mot</button>
                <br /><br />
                <div class="center_flex"></div>
	</div>

	<div class="inputy">
                <input name="number" type="number" placeholder="N° de Tuto..."/>
                <br /><br />
		<button class="glow-on-hover two" type="button" onclick="number()">Voir ce N° de Tuto</button>
                <br /><br />
	</div>			
</div>

<br /><br /><div id="error"><noscript><p><strong>Veuillez activer javascipt afin de pouvoir visualiser la liste des tutoriels</strong></p></center></noscript></div><div id="oki"></div><br /><br />
<!-- Modele de lien
		<li>
			<a href="javascript:url(numéro du sujet);">
				titre du tuto
			</a>
		</li>
-->
<script language="JavaScript">
document.write(pm);
</script>

</div>

<a name="bottom"></a>

<script type="text/javascript">
//faire apparaitre la liste des tutos après chargement du css
//document.getElementById("container").style.display = "";

//récup url avant chgt url
var path = window.location.pathname;

var path = path + window.location.search;


//fonction pour les admin
if (admin) {
    var btn = document.createElement('input');
    btn.value = 'Montrer le bloc admin';
    btn.className = 'mainoption';
    btn.setAttribute("onclick", "toggleDisplay('admin', 'Montrer le bloc admin', 'Cacher le bloc admin', this)");
    btn.type = 'button';
    btn.style.marginLeft = "25px";
    btn.style.backgroundColor = "lightsalmon";
    var child = document.getElementById("admin");
    var parent = document.getElementById("container");
    parent.insertBefore(btn, child);
} else {
    document.getElementById("admin").innerHTML = "";
    document.getElementById("admin").remove();
}

function toggleDisplay(elmt, montrer, cacher, moi) {
   if(typeof elmt == "string") {
      elmt = document.getElementById(elmt);
   }	  
   if(elmt.style.display == "none") {
      elmt.style.display = "";
      moi.value = cacher;
   } else {
      elmt.style.display = "none";
      moi.value = montrer;
   }
}

function f_admin() {
    clic();
    //récupération des value
    var titre = document.getElementById('titre').value;
    var titre_num = document.getElementById('titre_num').value;
    var n = "\n";
    var t = "\t";

    if (titre && titre_num) {
        document.getElementById('text_tuto').value =
                n + t + t +'<li>' + n + t + t + t +
				'<a href="javascript:url(' + titre_num + ');">' + n + t + t + t + t + titre + n + t + t + t +
				'</a>' + n + t + t + 
				'</li>';
        oki('Vous pouvez récupérer le code html');
    } else {
        error('Vous devez renseignez les deux champs!');
    }
}


//calcul nombre de tuto
var impo = document.querySelectorAll('#context li');
var nb = impo.length + 1;
var context = document.getElementById("context");

var ulo = document.createElement('style');
ulo.innerHTML =
    'ul {' +
    'counter-reset: index ' + nb + ';' +
    '}';

document.head.appendChild(ulo);


//fonction recherche
function doHighlight(bodyText, searchTerm, highlightStartTag,
    highlightEndTag) {
    var newText = "";
    var i = -1;
    var lcSearchTerm = searchTerm.toLowerCase();
    var lcBodyText = bodyText.toLowerCase();
    while (bodyText.length > 0) {
        i = lcBodyText.indexOf(lcSearchTerm, i + 1);
        if (i < 0) {
            newText += bodyText;
            bodyText = "";
        } else {
            if (bodyText.lastIndexOf(">", i) >= bodyText.lastIndexOf("<", i)) {
                if (lcBodyText.lastIndexOf("/script>", i) >=
                    lcBodyText.lastIndexOf("<script", i)) {
                    newText += bodyText.substring(0, i) + highlightStartTag +
                        bodyText.substr(i, searchTerm.length) + highlightEndTag;
                    bodyText = bodyText.substr(i + searchTerm.length);
                    lcBodyText = bodyText.toLowerCase();
                    i = -1;
                }
            }
        }
    }

    return newText;
}

function highlightSearchTerms(searchText, treatAsPhrase, warnOnFailure,
    highlightStartTag, highlightEndTag) {

    if ((!highlightStartTag) || (!highlightEndTag)) {
        highlightStartTag = "<mark>";
        highlightEndTag = "</mark>";
    }


    var re = new RegExp(highlightStartTag, "g");
    context.innerHTML = context.innerHTML.replace(re, "");



    if (treatAsPhrase) {
        searchArray = [searchText];
    } else {
        searchArray = searchText.split(" ");
    }

    if (!context || typeof(context.innerHTML) == "undefined") {
        if (warnOnFailure) {
            alert("Sorry, for some reason the text of this page is unavailable. Searching will not work.");
        }
        return false;
    }

    var bodyText = context.innerHTML;
    for (var i = 0; i < searchArray.length; i++) {
        bodyText = doHighlight(bodyText, searchArray[i], highlightStartTag,
            highlightEndTag);
    }

    context.innerHTML = bodyText;
    return true;
}



function find() {
    clic()
    var s = document.querySelector('input[name="keyword"]');
    var x = s.value;
    var nbr = "0";

    if (!x) {
        error("Vous devez spécifier au moins une lettre afin de pouvoir effectuer votre recherche");
        s.focus();
        return false;
    }

    var li = document.getElementsByTagName('li');

    for (var i = 0; i < li.length; i++) {
        li[i].style.removeProperty("height");
        li[i].style.removeProperty("padding");
        li[i].style.removeProperty("overflow");
        li[i].style.removeProperty("border");
    }

    highlightSearchTerms(x);


    for (var k = 0; k < li.length; k++) {

        var n = (li[k].innerHTML.indexOf("<mark>"));

        if (n < "0") {
            li[k].style.height = "0px";
            li[k].style.padding = "0px";
            li[k].style.overflow = "hidden";
            li[k].style.border = "0px";
        } else {
            nbr++
        }
    }

    var np = (context.innerHTML.indexOf("<mark>"));
    if (np < "0") {
        error("Votre recherche n'a donné aucun résultat!");
        s.focus();
    } else {
        oki("Votre recherche a donné " + nbr + " résultat(s)!");
    }
}

function number() {
    clic();
    var m = document.querySelector('input[name="number"]');
    var u = m.value;

    if ((m.value) == '') {
        error('Vous devez saisir un numéro de tuto!');
        m.focus();
    } else if (isNaN(m.value) == false) {
        if ((m.value) > nb - 1 || (m.value) <= 0) {
            error("Ce numéro de Tuto n'existe pas!");
            m.focus();
        }
        var lim = document.getElementsByTagName('li');
        var hrf = lim[nb - 1 - u].querySelector('a').getAttribute('href');
        oki("Vous avez été redirigé vers le tutoriel numéro " + u);
        window.location.assign(hrf);
    } else if (isNaN(m.value) == true) {
        error('Vous devez saisir un nombre!');
        m.focus();
    }
}

function url(jue) {
    var urlavant = "//forumtutorielssupports.xoo.it/t",
    //var urlavant = window.location.protocol + "//" + window.location.host + "/t",
    urlapres = ".htm",
    urlentiere = urlavant + jue + urlapres;
    window.open(urlentiere);
}

function error(message) {
    document.getElementById('error').innerHTML = message;
}

function oki(messageoki) {
    document.getElementById('oki').innerHTML = messageoki;
}

function clic() {
    error("");
    oki("");
}

context.addEventListener("click", clic, false);



if (location.hash) {
    var hash_tuto = location.hash;
    hash_tuto = hash_tuto.replace('#', '');
    document.getElementById("search").value = hash_tuto;
    find();
}

function ChangeUrl(page, url) {
    if (typeof(history.pushState) != "undefined") {
        var obj = {
            Page: page,
            Url: url
        };
        history.pushState(obj, obj.Page, obj.Url);
    } else {
        window.location.href = "homePage";
        // alert("Browser does not support HTML5.");
    }
}

ChangeUrl('Page1', 'Liste_des_Tutoriels_By_Superritou');


var titletext = " Liste des tutoriels "
var thetext = ""
var started = false
var step = 0
var times = 1

function welcometext() {
    times--
    if (times == 0) {
        if (started == false) {
            started = true;
            document.title = titletext;
            setTimeout("anim()", 1);
        }
        thetext = titletext;
    }
}


function anim() {
    step++
    if (step == 7) {
        step = 1
    }
    if (step == 1) {
        document.title = '!___' + thetext + '___!'
    }
    if (step == 2) {
        document.title = '_!__' + thetext + '__!_'
    }
    if (step == 3) {
        document.title = '!_!_' + thetext + '_!_!'
    }
    if (step == 4) {
        document.title = '_!_!' + thetext + '!_!_'
    }
    if (step == 5) {
        document.title = '__!_' + thetext + '_!__'
    }
    if (step == 6) {
        document.title = '___!' + thetext + '!___'
    }
    setTimeout("anim()", 200);
}

if (document.title) {
    window.onload = onload = welcometext;
}

//bloque touche F5 F4 F6
function bloqueTouche() {
    if (event.keyCode == 116 || event.keyCode == 115 || event.keyCode == 117) {
        event.keyCode = 0;
        return false;
    }
}
document.onkeydown = bloqueTouche;
</script>
  </body>
</html>
